{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{RotateSpinner}from\"react-spinners-kit\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Forecast=function Forecast(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),weather=_useState2[0],setWeather=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),temperature=_useState4[0],setTemperature=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),feelsLike=_useState6[0],setFeelsLike=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),iconCode=_useState8[0],setIconCode=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),daily=_useState10[0],setDaily=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),location=_useState12[0],setLocation=_useState12[1];var token=localStorage.getItem(\"token\");var getWeather=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:5002/forecast\",{token:token},[]);case 3:response=_context.sent;console.log(response);setTemperature(Math.round(response.data.weatherResult.current.temp));setWeather(response.data.weatherResult.current.weather[0].main);setFeelsLike(Math.round(response.data.weatherResult.current.feels_like));setIconCode(response.data.weatherResult.current.weather[0].icon);setDaily(response.data.weatherResult.daily);//this sets the forecast\nsetLocation(response.data.results.location);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function getWeather(){return _ref.apply(this,arguments);};}();//defensive checks\nuseEffect(function(){getWeather();},[]);if(!temperature||!weather){return/*#__PURE__*/_jsx(RotateSpinner,{size:45,color:\"#686769\",className:\"spinner\"});}var days=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cards\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"The weather in \",location]}),/*#__PURE__*/_jsxs(\"h2\",{children:[temperature,\"\\xBAC\"]}),/*#__PURE__*/_jsx(\"h2\",{children:weather}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Feels like \",feelsLike,\"\\xBAC\"]}),/*#__PURE__*/_jsx(\"img\",{src:\"http://openweathermap.org/img/wn/\".concat(iconCode,\"@2x.png\"),alt:\"weather icon\",className:\"weatherIcon\"})]}),/*#__PURE__*/_jsx(\"div\",{children:daily.map(function(day,index){if(index===0||index>=6){return;}//removing today's forecast in the tiles\nvar dateObject=new Date(day.dt*1000);// unix time to readable date\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"forecastContainer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"forecastItem\",children:days[dateObject.getDay()]}),/*#__PURE__*/_jsx(\"img\",{className:\"forecastImage\",alt:\"forecast image\",src:\"http://openweathermap.org/img/wn/\".concat(day.weather[0].icon,\"@2x.png\")//adding in icons\n}),/*#__PURE__*/_jsxs(\"p\",{className:\"forecastItem\",children:[Math.round(day.temp.max),\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"feelsLikeForecast\",children:[\"Feels Like \",Math.round(day.feels_like.day),\"\\xB0C\"]})]});})})]})});};export default Forecast;","map":{"version":3,"sources":["/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/src/components/MainPages/Weather/Forecast.jsx"],"names":["useEffect","useState","axios","RotateSpinner","Forecast","weather","setWeather","temperature","setTemperature","feelsLike","setFeelsLike","iconCode","setIconCode","daily","setDaily","location","setLocation","token","localStorage","getItem","getWeather","post","response","console","log","Math","round","data","weatherResult","current","temp","main","feels_like","icon","results","error","days","map","day","index","dateObject","Date","dt","getDay","max"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { RotateSpinner } from \"react-spinners-kit\";\n\nconst Forecast = () => {\n\tconst [weather, setWeather] = useState(\"\");\n\tconst [temperature, setTemperature] = useState(0);\n\tconst [feelsLike, setFeelsLike] = useState(0);\n\tconst [iconCode, setIconCode] = useState(\"\");\n\tconst [daily, setDaily] = useState([]);\n\tconst [location, setLocation] = useState(\"\");\n\tconst token = localStorage.getItem(\"token\");\n\n\tconst getWeather = async () => {\n\t\ttry {\n\t\t\tconst response = await axios.post(\n\t\t\t\t\"http://localhost:5002/forecast\",\n\t\t\t\t{\n\t\t\t\t\ttoken,\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t);\n\t\t\tconsole.log(response);\n\n\t\t\tsetTemperature(Math.round(response.data.weatherResult.current.temp));\n\t\t\tsetWeather(response.data.weatherResult.current.weather[0].main);\n\t\t\tsetFeelsLike(Math.round(response.data.weatherResult.current.feels_like));\n\t\t\tsetIconCode(response.data.weatherResult.current.weather[0].icon);\n\t\t\tsetDaily(response.data.weatherResult.daily); //this sets the forecast\n\t\t\tsetLocation(response.data.results.location);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\t//defensive checks\n\tuseEffect(() => {\n\t\tgetWeather();\n\t}, []);\n\n\tif (!temperature || !weather) {\n\t\treturn <RotateSpinner size={45} color=\"#686769\" className=\"spinner\" />;\n\t}\n\n\tconst days = [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"cards\">\n\t\t\t\t\t<h2>The weather in {location}</h2>\n\t\t\t\t\t<h2>{temperature}ºC</h2>\n\t\t\t\t\t<h2>{weather}</h2>\n\t\t\t\t\t<h4>Feels like {feelsLike}ºC</h4>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={`http://openweathermap.org/img/wn/${iconCode}@2x.png`}\n\t\t\t\t\t\talt=\"weather icon\"\n\t\t\t\t\t\tclassName=\"weatherIcon\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{daily.map((day, index) => {\n\t\t\t\t\t\tif (index === 0 || index >= 6) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} //removing today's forecast in the tiles\n\n\t\t\t\t\t\tconst dateObject = new Date(day.dt * 1000); // unix time to readable date\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"forecastContainer\">\n\t\t\t\t\t\t\t\t<p className=\"forecastItem\">{days[dateObject.getDay()]}</p>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName=\"forecastImage\"\n\t\t\t\t\t\t\t\t\talt=\"forecast image\"\n\t\t\t\t\t\t\t\t\tsrc={`http://openweathermap.org/img/wn/${day.weather[0].icon}@2x.png`} //adding in icons\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p className=\"forecastItem\">{Math.round(day.temp.max)}°C</p>\n\t\t\t\t\t\t\t\t<p className=\"feelsLikeForecast\">\n\t\t\t\t\t\t\t\t\tFeels Like {Math.round(day.feels_like.day)}°C\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default Forecast;\n"]},"metadata":{},"sourceType":"module"}