{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import axios from\"axios\";import ReverseGeo from\"./ReverseGeo\";import{RotateSpinner}from\"react-spinners-kit\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Forecast=function Forecast(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),latitude=_useState2[0],setLatitude=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),longitude=_useState4[0],setLongitude=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),weather=_useState6[0],setWeather=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),temperature=_useState8[0],setTemperature=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),feelsLike=_useState10[0],setFeelsLike=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),iconCode=_useState12[0],setIconCode=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),daily=_useState14[0],setDaily=_useState14[1];var savePositionToState=function savePositionToState(position){setLatitude(position.coords.latitude);setLongitude(position.coords.longitude);};var getLocation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.navigator.geolocation.getCurrentPosition(savePositionToState);case 2:case\"end\":return _context.stop();}}},_callee);}));return function getLocation(){return _ref.apply(this,arguments);};}();useEffect(function(){getLocation();},[]);var getWeather=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"http://api.timbertours.co.uk/getWeatherData\",{});case 3:response=_context2.sent;console.log(response);setTemperature(Math.round(response.data.result.current.temp));setWeather(response.data.result.current.weather[0].main);setFeelsLike(Math.round(response.data.result.current.feels_like));setIconCode(response.data.result.current.weather[0].icon);setDaily(response.data.result.daily);//this sets the forecast\n_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function getWeather(){return _ref2.apply(this,arguments);};}();//defensive checks\nuseEffect(function(){if(getWeather===null){return/*#__PURE__*/_jsx(RotateSpinner,{size:45,color:\"#686769\",className:\"spinner\"});}else{getWeather();}}// \tif (longitude && latitude) getWeather();\n// }, [latitude, longitude]\n);var days=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cards\",children:[/*#__PURE__*/_jsx(ReverseGeo,{}),/*#__PURE__*/_jsxs(\"h2\",{children:[temperature,\"\\xBAC\"]}),/*#__PURE__*/_jsx(\"h2\",{children:weather}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Feels like \",feelsLike,\"\\xBAC\"]}),/*#__PURE__*/_jsx(\"img\",{src:\"http://openweathermap.org/img/wn/\".concat(iconCode,\"@2x.png\"),alt:\"weather icon\",className:\"weatherIcon\"})]}),/*#__PURE__*/_jsx(\"div\",{children:daily.map(function(day,index){if(index===0||index>=6){return;}//removing today's forecast in the tiles\nvar dateObject=new Date(day.dt*1000);// unix time to readable date\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"forecastContainer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"forecastItem\",children:days[dateObject.getDay()]}),/*#__PURE__*/_jsx(\"img\",{className:\"forecastImage\",alt:\"forecast\",src:\"http://openweathermap.org/img/wn/\".concat(day.weather[0].icon,\"@2x.png\")//adding in icons\n}),/*#__PURE__*/_jsxs(\"p\",{className:\"forecastItem\",children:[Math.round(day.temp.max),\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"feelsLikeForecast\",children:[\"Feels Like \",Math.round(day.feels_like.day),\"\\xB0C\"]})]});})})]})});};export default Forecast;","map":{"version":3,"sources":["/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/src/components/Forecast.jsx"],"names":["useEffect","useState","axios","ReverseGeo","RotateSpinner","Forecast","latitude","setLatitude","longitude","setLongitude","weather","setWeather","temperature","setTemperature","feelsLike","setFeelsLike","iconCode","setIconCode","daily","setDaily","savePositionToState","position","coords","getLocation","window","navigator","geolocation","getCurrentPosition","getWeather","post","response","console","log","Math","round","data","result","current","temp","main","feels_like","icon","error","days","map","day","index","dateObject","Date","dt","getDay","max"],"mappings":"shBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,aAAT,KAA8B,oBAA9B,C,6IAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACtB,cAAgCJ,QAAQ,CAAC,CAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAAkCN,QAAQ,CAAC,CAAD,CAA1C,yCAAOO,SAAP,eAAkBC,YAAlB,eAEA,eAA8BR,QAAQ,CAAC,EAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAAsCV,QAAQ,CAAC,CAAD,CAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eACA,eAAkCZ,QAAQ,CAAC,CAAD,CAA1C,0CAAOa,SAAP,gBAAkBC,YAAlB,gBACA,gBAAgCd,QAAQ,CAAC,EAAD,CAAxC,2CAAOe,QAAP,gBAAiBC,WAAjB,gBACA,gBAA0BhB,QAAQ,CAAC,EAAD,CAAlC,2CAAOiB,KAAP,gBAAcC,QAAd,gBAEA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,QAAD,CAAc,CACzCd,WAAW,CAACc,QAAQ,CAACC,MAAT,CAAgBhB,QAAjB,CAAX,CACAG,YAAY,CAACY,QAAQ,CAACC,MAAT,CAAgBd,SAAjB,CAAZ,CACA,CAHD,CAKA,GAAMe,CAAAA,WAAW,0FAAG,yJACbC,CAAAA,MAAM,CAACC,SAAP,CAAiBC,WAAjB,CAA6BC,kBAA7B,CAAgDP,mBAAhD,CADa,uDAAH,kBAAXG,CAAAA,WAAW,0CAAjB,CAIAvB,SAAS,CAAC,UAAM,CACfuB,WAAW,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMK,CAAAA,UAAU,2FAAG,6LAEM1B,CAAAA,KAAK,CAAC2B,IAAN,CACtB,6CADsB,CAEtB,EAFsB,CAFN,QAEXC,QAFW,gBAMjBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAEAjB,cAAc,CAACoB,IAAI,CAACC,KAAL,CAAWJ,QAAQ,CAACK,IAAT,CAAcC,MAAd,CAAqBC,OAArB,CAA6BC,IAAxC,CAAD,CAAd,CACA3B,UAAU,CAACmB,QAAQ,CAACK,IAAT,CAAcC,MAAd,CAAqBC,OAArB,CAA6B3B,OAA7B,CAAqC,CAArC,EAAwC6B,IAAzC,CAAV,CACAxB,YAAY,CAACkB,IAAI,CAACC,KAAL,CAAWJ,QAAQ,CAACK,IAAT,CAAcC,MAAd,CAAqBC,OAArB,CAA6BG,UAAxC,CAAD,CAAZ,CACAvB,WAAW,CAACa,QAAQ,CAACK,IAAT,CAAcC,MAAd,CAAqBC,OAArB,CAA6B3B,OAA7B,CAAqC,CAArC,EAAwC+B,IAAzC,CAAX,CACAtB,QAAQ,CAACW,QAAQ,CAACK,IAAT,CAAcC,MAAd,CAAqBlB,KAAtB,CAAR,CAAsC;AAZrB,qFAcjBa,OAAO,CAACW,KAAR,eAdiB,uEAAH,kBAAVd,CAAAA,UAAU,2CAAhB,CAiBA;AACA5B,SAAS,CACR,UAAM,CACL,GAAI4B,UAAU,GAAK,IAAnB,CAAyB,CACxB,mBAAO,KAAC,aAAD,EAAe,IAAI,CAAE,EAArB,CAAyB,KAAK,CAAC,SAA/B,CAAyC,SAAS,CAAC,SAAnD,EAAP,CACA,CAFD,IAEO,CACNA,UAAU,GACV,CACD,CACD;AACA;AATQ,CAAT,CAYA,GAAMe,CAAAA,IAAI,CAAG,CACZ,QADY,CAEZ,QAFY,CAGZ,SAHY,CAIZ,WAJY,CAKZ,UALY,CAMZ,QANY,CAOZ,UAPY,CAAb,CAUA,mBACC,sCACC,aAAK,SAAS,CAAC,WAAf,wBACC,aAAK,SAAS,CAAC,OAAf,wBACC,KAAC,UAAD,IADD,cAEC,sBAAK/B,WAAL,WAFD,cAGC,oBAAKF,OAAL,EAHD,cAIC,oCAAgBI,SAAhB,WAJD,cAKC,YACC,GAAG,4CAAsCE,QAAtC,WADJ,CAEC,GAAG,CAAC,cAFL,CAGC,SAAS,CAAC,aAHX,EALD,GADD,cAYC,qBACEE,KAAK,CAAC0B,GAAN,CAAU,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAC1B,GAAIA,KAAK,GAAK,CAAV,EAAeA,KAAK,EAAI,CAA5B,CAA+B,CAC9B,OACA,CAAC;AAEF,GAAMC,CAAAA,UAAU,CAAG,GAAIC,CAAAA,IAAJ,CAASH,GAAG,CAACI,EAAJ,CAAS,IAAlB,CAAnB,CAA4C;AAC5C,mBACC,aAAK,SAAS,CAAC,mBAAf,wBACC,UAAG,SAAS,CAAC,cAAb,UAA6BN,IAAI,CAACI,UAAU,CAACG,MAAX,EAAD,CAAjC,EADD,cAEC,YACC,SAAS,CAAC,eADX,CAEC,GAAG,CAAC,UAFL,CAGC,GAAG,4CAAsCL,GAAG,CAACnC,OAAJ,CAAY,CAAZ,EAAe+B,IAArD,WAAoE;AAHxE,EAFD,cAOC,WAAG,SAAS,CAAC,cAAb,WAA6BR,IAAI,CAACC,KAAL,CAAWW,GAAG,CAACP,IAAJ,CAASa,GAApB,CAA7B,WAPD,cAQC,WAAG,SAAS,CAAC,mBAAb,yBACalB,IAAI,CAACC,KAAL,CAAWW,GAAG,CAACL,UAAJ,CAAeK,GAA1B,CADb,WARD,GADD,CAcA,CApBA,CADF,EAZD,GADD,EADD,CAwCA,CAvGD,CAyGA,cAAexC,CAAAA,QAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport ReverseGeo from \"./ReverseGeo\";\nimport { RotateSpinner } from \"react-spinners-kit\";\n\nconst Forecast = () => {\n\tconst [latitude, setLatitude] = useState(0);\n\tconst [longitude, setLongitude] = useState(0);\n\n\tconst [weather, setWeather] = useState(\"\");\n\tconst [temperature, setTemperature] = useState(0);\n\tconst [feelsLike, setFeelsLike] = useState(0);\n\tconst [iconCode, setIconCode] = useState(\"\");\n\tconst [daily, setDaily] = useState([]);\n\n\tconst savePositionToState = (position) => {\n\t\tsetLatitude(position.coords.latitude);\n\t\tsetLongitude(position.coords.longitude);\n\t};\n\n\tconst getLocation = async () => {\n\t\tawait window.navigator.geolocation.getCurrentPosition(savePositionToState);\n\t};\n\n\tuseEffect(() => {\n\t\tgetLocation();\n\t}, []);\n\n\tconst getWeather = async () => {\n\t\ttry {\n\t\t\tconst response = await axios.post(\n\t\t\t\t\"http://api.timbertours.co.uk/getWeatherData\",\n\t\t\t\t{}\n\t\t\t);\n\t\t\tconsole.log(response);\n\n\t\t\tsetTemperature(Math.round(response.data.result.current.temp));\n\t\t\tsetWeather(response.data.result.current.weather[0].main);\n\t\t\tsetFeelsLike(Math.round(response.data.result.current.feels_like));\n\t\t\tsetIconCode(response.data.result.current.weather[0].icon);\n\t\t\tsetDaily(response.data.result.daily); //this sets the forecast\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\t//defensive checks\n\tuseEffect(\n\t\t() => {\n\t\t\tif (getWeather === null) {\n\t\t\t\treturn <RotateSpinner size={45} color=\"#686769\" className=\"spinner\" />;\n\t\t\t} else {\n\t\t\t\tgetWeather();\n\t\t\t}\n\t\t}\n\t\t// \tif (longitude && latitude) getWeather();\n\t\t// }, [latitude, longitude]\n\t);\n\n\tconst days = [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"cards\">\n\t\t\t\t\t<ReverseGeo />\n\t\t\t\t\t<h2>{temperature}ºC</h2>\n\t\t\t\t\t<h2>{weather}</h2>\n\t\t\t\t\t<h4>Feels like {feelsLike}ºC</h4>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={`http://openweathermap.org/img/wn/${iconCode}@2x.png`}\n\t\t\t\t\t\talt=\"weather icon\"\n\t\t\t\t\t\tclassName=\"weatherIcon\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{daily.map((day, index) => {\n\t\t\t\t\t\tif (index === 0 || index >= 6) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} //removing today's forecast in the tiles\n\n\t\t\t\t\t\tconst dateObject = new Date(day.dt * 1000); // unix time to readable date\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"forecastContainer\">\n\t\t\t\t\t\t\t\t<p className=\"forecastItem\">{days[dateObject.getDay()]}</p>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName=\"forecastImage\"\n\t\t\t\t\t\t\t\t\talt=\"forecast\"\n\t\t\t\t\t\t\t\t\tsrc={`http://openweathermap.org/img/wn/${day.weather[0].icon}@2x.png`} //adding in icons\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p className=\"forecastItem\">{Math.round(day.temp.max)}°C</p>\n\t\t\t\t\t\t\t\t<p className=\"feelsLikeForecast\">\n\t\t\t\t\t\t\t\t\tFeels Like {Math.round(day.feels_like.day)}°C\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default Forecast;\n"]},"metadata":{},"sourceType":"module"}