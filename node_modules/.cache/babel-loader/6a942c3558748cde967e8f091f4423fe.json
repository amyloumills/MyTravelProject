{"ast":null,"code":"var _jsxFileName = \"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/src/components/MainPages/YourTour/TimerData.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport Countdown from \"./Countdown\";\nimport { RotateSpinner } from \"react-spinners-kit\";\nimport * as Constants from \"../Constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst TimerData = () => {\n  _s();\n\n  const [timerDays, setTimerDays] = useState(\"00\");\n  const [timerHours, setTimerHours] = useState(\"00\");\n  const [timerMinutes, setTimerMinutes] = useState(\"00\");\n  const [timerSeconds, setTimerSeconds] = useState(\"00\");\n  const [countdownDate, setCountdownDate] = useState(0);\n  const token = localStorage.getItem(\"token\");\n  useEffect(() => {\n    async function fetchTime() {\n      const results = await axios.post(\"https://api.timbertours.co.uk/yourTour\", {\n        token\n      });\n      const unixTime = new Date(results.data.results[0].date);\n      setCountdownDate(unixTime.getTime());\n    }\n\n    fetchTime();\n  }, [token]);\n  var interval = useRef();\n\n  const startTimer = () => {\n    interval = setInterval(() => {\n      const timeDifference = countdownDate - new Date().getTime(); //gets the time difference between now and the countdown date\n\n      const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24)); //unix time to days, etc\n\n      const hours = Math.floor(timeDifference % (1000 * 60 * 60 * 24) / (1000 * 60 * 60) // unix time to hours\n      );\n      const minutes = Math.floor(timeDifference % (1000 * 60 * 60) / (1000 * 60) //unix time to minutes\n      );\n      const seconds = timeDifference % (1000 * 60) / 1000; //unix time to seconds\n\n      if (timeDifference < 0) {\n        //stop timer\n        clearInterval(interval.current);\n      } else {\n        //update time\n        setTimerDays(days);\n        setTimerHours(hours);\n        setTimerMinutes(minutes);\n        setTimerSeconds(seconds);\n      }\n    }, 50);\n  };\n\n  useEffect(() => {\n    if (countdownDate === 0 || null) {\n      return /*#__PURE__*/_jsxDEV(RotateSpinner, {\n        size: 45,\n        color: \"#686769\",\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this);\n    } else {\n      startTimer();\n    }\n  });\n  useEffect(() => {\n    startTimer();\n    return () => {\n      clearInterval(interval.current);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Countdown, {\n      timerDays: timerDays,\n      timerHours: timerHours,\n      timerMinutes: timerMinutes,\n      timerSeconds: timerSeconds\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\n_s(TimerData, \"mLP8Tc2nfJEdwx9EEcIK4KronwE=\");\n\n_c = TimerData;\nexport default TimerData;\n\nvar _c;\n\n$RefreshReg$(_c, \"TimerData\");","map":{"version":3,"sources":["/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/src/components/MainPages/YourTour/TimerData.jsx"],"names":["React","useEffect","useState","useRef","axios","Countdown","RotateSpinner","Constants","TimerData","timerDays","setTimerDays","timerHours","setTimerHours","timerMinutes","setTimerMinutes","timerSeconds","setTimerSeconds","countdownDate","setCountdownDate","token","localStorage","getItem","fetchTime","results","post","unixTime","Date","data","date","getTime","interval","startTimer","setInterval","timeDifference","days","Math","floor","hours","minutes","seconds","clearInterval","current"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport Countdown from \"./Countdown\";\nimport { RotateSpinner } from \"react-spinners-kit\";\nimport * as Constants from \"../Constants\";\n\nconst TimerData = () => {\n\tconst [timerDays, setTimerDays] = useState(\"00\");\n\tconst [timerHours, setTimerHours] = useState(\"00\");\n\tconst [timerMinutes, setTimerMinutes] = useState(\"00\");\n\tconst [timerSeconds, setTimerSeconds] = useState(\"00\");\n\tconst [countdownDate, setCountdownDate] = useState(0);\n\n\tconst token = localStorage.getItem(\"token\");\n\n\tuseEffect(() => {\n\t\tasync function fetchTime() {\n\t\t\tconst results = await axios.post(\n\t\t\t\t\"https://api.timbertours.co.uk/yourTour\",\n\t\t\t\t{\n\t\t\t\t\ttoken,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst unixTime = new Date(results.data.results[0].date);\n\t\t\tsetCountdownDate(unixTime.getTime());\n\t\t}\n\t\tfetchTime();\n\t}, [token]);\n\n\tvar interval = useRef();\n\n\tconst startTimer = () => {\n\t\tinterval = setInterval(() => {\n\t\t\tconst timeDifference = countdownDate - new Date().getTime(); //gets the time difference between now and the countdown date\n\n\t\t\tconst days = Math.floor(timeDifference / (1000 * 60 * 60 * 24)); //unix time to days, etc\n\t\t\tconst hours = Math.floor(\n\t\t\t\t(timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60) // unix time to hours\n\t\t\t);\n\t\t\tconst minutes = Math.floor(\n\t\t\t\t(timeDifference % (1000 * 60 * 60)) / (1000 * 60) //unix time to minutes\n\t\t\t);\n\t\t\tconst seconds = (timeDifference % (1000 * 60)) / 1000; //unix time to seconds\n\n\t\t\tif (timeDifference < 0) {\n\t\t\t\t//stop timer\n\t\t\t\tclearInterval(interval.current);\n\t\t\t} else {\n\t\t\t\t//update time\n\t\t\t\tsetTimerDays(days);\n\t\t\t\tsetTimerHours(hours);\n\t\t\t\tsetTimerMinutes(minutes);\n\t\t\t\tsetTimerSeconds(seconds);\n\t\t\t}\n\t\t}, 50);\n\t};\n\tuseEffect(() => {\n\t\tif (countdownDate === 0 || null) {\n\t\t\treturn <RotateSpinner size={45} color=\"#686769\" className=\"spinner\" />;\n\t\t} else {\n\t\t\tstartTimer();\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tstartTimer();\n\t\treturn () => {\n\t\t\tclearInterval(interval.current);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Countdown\n\t\t\t\ttimerDays={timerDays}\n\t\t\t\ttimerHours={timerHours}\n\t\t\t\ttimerMinutes={timerMinutes}\n\t\t\t\ttimerSeconds={timerSeconds}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default TimerData;\n"]},"metadata":{},"sourceType":"module"}