{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import axios from\"axios\";import Countdown from\"./Countdown\";import{RotateSpinner}from\"react-spinners-kit\";import*as Constants from\"../Utils/Constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TimerData=function TimerData(){var _useState=useState(\"00\"),_useState2=_slicedToArray(_useState,2),timerDays=_useState2[0],setTimerDays=_useState2[1];var _useState3=useState(\"00\"),_useState4=_slicedToArray(_useState3,2),timerHours=_useState4[0],setTimerHours=_useState4[1];var _useState5=useState(\"00\"),_useState6=_slicedToArray(_useState5,2),timerMinutes=_useState6[0],setTimerMinutes=_useState6[1];var _useState7=useState(\"00\"),_useState8=_slicedToArray(_useState7,2),timerSeconds=_useState8[0],setTimerSeconds=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),countdownDate=_useState10[0],setCountdownDate=_useState10[1];var token=localStorage.getItem(\"token\");useEffect(function(){function fetchTime(){return _fetchTime.apply(this,arguments);}function _fetchTime(){_fetchTime=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results,unixTime;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(Constants.TIMEURL,{token:token});case 2:results=_context.sent;unixTime=new Date(results.data.results[0].date);setCountdownDate(unixTime.getTime());case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchTime.apply(this,arguments);}fetchTime();},[token]);var interval=useRef();var startTimer=function startTimer(){interval=setInterval(function(){var timeDifference=countdownDate-new Date().getTime();//gets the time difference between now and the countdown date\nvar days=Math.floor(timeDifference/(1000*60*60*24));//unix time to days, etc\nvar hours=Math.floor(timeDifference%(1000*60*60*24)/(1000*60*60)// unix time to hours\n);var minutes=Math.floor(timeDifference%(1000*60*60)/(1000*60)//unix time to minutes\n);var seconds=timeDifference%(1000*60)/1000;//unix time to seconds\nif(timeDifference<0){//stop timer\nclearInterval(interval.current);}else{//update time\nsetTimerDays(days);setTimerHours(hours);setTimerMinutes(minutes);setTimerSeconds(seconds);}},50);};useEffect(function(){if(countdownDate===0||null){return/*#__PURE__*/_jsx(RotateSpinner,{size:45,color:\"#686769\",className:\"spinner\"});}else{startTimer();}});useEffect(function(){startTimer();return function(){clearInterval(interval.current);};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Countdown,{timerDays:timerDays,timerHours:timerHours,timerMinutes:timerMinutes,timerSeconds:timerSeconds})});};export default TimerData;","map":{"version":3,"sources":["/Users/amymiller/Desktop/Cohort 6/My Project/MyTravelProject/src/components/MainPages/YourTour/TimerData.jsx"],"names":["React","useEffect","useState","useRef","axios","Countdown","RotateSpinner","Constants","TimerData","timerDays","setTimerDays","timerHours","setTimerHours","timerMinutes","setTimerMinutes","timerSeconds","setTimerSeconds","countdownDate","setCountdownDate","token","localStorage","getItem","fetchTime","post","TIMEURL","results","unixTime","Date","data","date","getTime","interval","startTimer","setInterval","timeDifference","days","Math","floor","hours","minutes","seconds","clearInterval","current"],"mappings":"shBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,MAAO,GAAKC,CAAAA,SAAZ,KAA2B,oBAA3B,C,gGAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACvB,cAAkCN,QAAQ,CAAC,IAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAAoCR,QAAQ,CAAC,IAAD,CAA5C,yCAAOS,UAAP,eAAmBC,aAAnB,eACA,eAAwCV,QAAQ,CAAC,IAAD,CAAhD,yCAAOW,YAAP,eAAqBC,eAArB,eACA,eAAwCZ,QAAQ,CAAC,IAAD,CAAhD,yCAAOa,YAAP,eAAqBC,eAArB,eACA,eAA0Cd,QAAQ,CAAC,CAAD,CAAlD,0CAAOe,aAAP,gBAAsBC,gBAAtB,gBAEA,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAEApB,SAAS,CAAC,UAAM,SACAqB,CAAAA,SADA,qIACf,8KACuBlB,CAAAA,KAAK,CAACmB,IAAN,CAAWhB,SAAS,CAACiB,OAArB,CAA8B,CACnDL,KAAK,CAALA,KADmD,CAA9B,CADvB,QACOM,OADP,eAKOC,QALP,CAKkB,GAAIC,CAAAA,IAAJ,CAASF,OAAO,CAACG,IAAR,CAAaH,OAAb,CAAqB,CAArB,EAAwBI,IAAjC,CALlB,CAMCX,gBAAgB,CAACQ,QAAQ,CAACI,OAAT,EAAD,CAAhB,CAND,sDADe,4CASfR,SAAS,GACT,CAVQ,CAUN,CAACH,KAAD,CAVM,CAAT,CAYA,GAAIY,CAAAA,QAAQ,CAAG5B,MAAM,EAArB,CAEA,GAAM6B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACxBD,QAAQ,CAAGE,WAAW,CAAC,UAAM,CAC5B,GAAMC,CAAAA,cAAc,CAAGjB,aAAa,CAAG,GAAIU,CAAAA,IAAJ,GAAWG,OAAX,EAAvC,CAA6D;AAE7D,GAAMK,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWH,cAAc,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAzB,CAAb,CAAiE;AACjE,GAAMI,CAAAA,KAAK,CAAGF,IAAI,CAACC,KAAL,CACZH,cAAc,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAf,EAA4C,KAAO,EAAP,CAAY,EAAxD,CAA4D;AAD/C,CAAd,CAGA,GAAMK,CAAAA,OAAO,CAAGH,IAAI,CAACC,KAAL,CACdH,cAAc,EAAI,KAAO,EAAP,CAAY,EAAhB,CAAf,EAAuC,KAAO,EAA9C,CAAkD;AADnC,CAAhB,CAGA,GAAMM,CAAAA,OAAO,CAAIN,cAAc,EAAI,KAAO,EAAX,CAAf,CAAiC,IAAjD,CAAuD;AAEvD,GAAIA,cAAc,CAAG,CAArB,CAAwB,CACvB;AACAO,aAAa,CAACV,QAAQ,CAACW,OAAV,CAAb,CACA,CAHD,IAGO,CACN;AACAhC,YAAY,CAACyB,IAAD,CAAZ,CACAvB,aAAa,CAAC0B,KAAD,CAAb,CACAxB,eAAe,CAACyB,OAAD,CAAf,CACAvB,eAAe,CAACwB,OAAD,CAAf,CACA,CACD,CAtBqB,CAsBnB,EAtBmB,CAAtB,CAuBA,CAxBD,CAyBAvC,SAAS,CAAC,UAAM,CACf,GAAIgB,aAAa,GAAK,CAAlB,EAAuB,IAA3B,CAAiC,CAChC,mBAAO,KAAC,aAAD,EAAe,IAAI,CAAE,EAArB,CAAyB,KAAK,CAAC,SAA/B,CAAyC,SAAS,CAAC,SAAnD,EAAP,CACA,CAFD,IAEO,CACNe,UAAU,GACV,CACD,CANQ,CAAT,CAQA/B,SAAS,CAAC,UAAM,CACf+B,UAAU,GACV,MAAO,WAAM,CACZS,aAAa,CAACV,QAAQ,CAACW,OAAV,CAAb,CACA,CAFD,CAGA,CALQ,CAKN,EALM,CAAT,CAOA,mBACC,sCACC,KAAC,SAAD,EACC,SAAS,CAAEjC,SADZ,CAEC,UAAU,CAAEE,UAFb,CAGC,YAAY,CAAEE,YAHf,CAIC,YAAY,CAAEE,YAJf,EADD,EADD,CAUA,CAzED,CA2EA,cAAeP,CAAAA,SAAf","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport Countdown from \"./Countdown\";\nimport { RotateSpinner } from \"react-spinners-kit\";\nimport * as Constants from \"../Utils/Constants\";\n\nconst TimerData = () => {\n\tconst [timerDays, setTimerDays] = useState(\"00\");\n\tconst [timerHours, setTimerHours] = useState(\"00\");\n\tconst [timerMinutes, setTimerMinutes] = useState(\"00\");\n\tconst [timerSeconds, setTimerSeconds] = useState(\"00\");\n\tconst [countdownDate, setCountdownDate] = useState(0);\n\n\tconst token = localStorage.getItem(\"token\");\n\n\tuseEffect(() => {\n\t\tasync function fetchTime() {\n\t\t\tconst results = await axios.post(Constants.TIMEURL, {\n\t\t\t\ttoken,\n\t\t\t});\n\n\t\t\tconst unixTime = new Date(results.data.results[0].date);\n\t\t\tsetCountdownDate(unixTime.getTime());\n\t\t}\n\t\tfetchTime();\n\t}, [token]);\n\n\tvar interval = useRef();\n\n\tconst startTimer = () => {\n\t\tinterval = setInterval(() => {\n\t\t\tconst timeDifference = countdownDate - new Date().getTime(); //gets the time difference between now and the countdown date\n\n\t\t\tconst days = Math.floor(timeDifference / (1000 * 60 * 60 * 24)); //unix time to days, etc\n\t\t\tconst hours = Math.floor(\n\t\t\t\t(timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60) // unix time to hours\n\t\t\t);\n\t\t\tconst minutes = Math.floor(\n\t\t\t\t(timeDifference % (1000 * 60 * 60)) / (1000 * 60) //unix time to minutes\n\t\t\t);\n\t\t\tconst seconds = (timeDifference % (1000 * 60)) / 1000; //unix time to seconds\n\n\t\t\tif (timeDifference < 0) {\n\t\t\t\t//stop timer\n\t\t\t\tclearInterval(interval.current);\n\t\t\t} else {\n\t\t\t\t//update time\n\t\t\t\tsetTimerDays(days);\n\t\t\t\tsetTimerHours(hours);\n\t\t\t\tsetTimerMinutes(minutes);\n\t\t\t\tsetTimerSeconds(seconds);\n\t\t\t}\n\t\t}, 50);\n\t};\n\tuseEffect(() => {\n\t\tif (countdownDate === 0 || null) {\n\t\t\treturn <RotateSpinner size={45} color=\"#686769\" className=\"spinner\" />;\n\t\t} else {\n\t\t\tstartTimer();\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tstartTimer();\n\t\treturn () => {\n\t\t\tclearInterval(interval.current);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Countdown\n\t\t\t\ttimerDays={timerDays}\n\t\t\t\ttimerHours={timerHours}\n\t\t\t\ttimerMinutes={timerMinutes}\n\t\t\t\ttimerSeconds={timerSeconds}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default TimerData;\n"]},"metadata":{},"sourceType":"module"}